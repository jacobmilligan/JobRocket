<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Jobrocket: Jobrocket</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <header class="main-header">
        <span class="main-title"><a href="index.html">Jobrocket</a></span>
        <nav class="main-nav">
            <ul>
                <li>
                    <a href="classes.html">Classes</a>
                </li>
                <li>
                    <a href="files.html">Files</a>
                </li>
            </ul>
        </nav>
    </header>
    <nav>
    </nav>
    <div id="doxygen-content">
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Jobrocket </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Jobrocket is a task-based parallelism library initially developed as an internal library for the <a href="https://github.com/jacobmilligan/Skyrocket">Skyrocket</a> framework. It's designed to be lightweight with a simple interface, making use of C++11/14 concurrency primitives. Internally, Jobrocket uses a lock-free work-stealing algorithm to schedule jobs to workers.</p>
<p><a href="https://jacobmilligan.github.io/Jobrocket/">Documentation is available here</a>.</p>
<h2>Example</h2>
<p>Here's a quick example of how to use Jobrocket:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_jobrocket_8hpp.html">JobRocket/JobRocket.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_job_group_8hpp.html">JobRocket/JobGroup.hpp</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    <span class="comment">// Launch the scheduler with the desired number of workers and main-threads.</span></div><div class="line">    <span class="comment">// This example leaves the number of workers and main threads up to the scheduler which will</span></div><div class="line">    <span class="comment">// usually be the physical cores + 1 workers and 1 main thread</span></div><div class="line">    <a class="code" href="namespacejobrocket.html#ac569337e5fd52f6365a3168dd47a84fa">jobrocket::startup</a>(<a class="code" href="classjobrocket_1_1_scheduler.html#ac6e2466cbeffbcbc91ff73bc4f7b40c8">jobrocket::Scheduler::auto_thread_count</a>,</div><div class="line">                       <a class="code" href="classjobrocket_1_1_scheduler.html#ac6e2466cbeffbcbc91ff73bc4f7b40c8">jobrocket::Scheduler::auto_thread_count</a>);</div><div class="line"></div><div class="line">    <span class="comment">// Allocate a few jobs using the job pool but don&#39;t run them</span></div><div class="line">    <span class="keyword">auto</span>* job1 = <a class="code" href="namespacejobrocket.html#a71288fffce964c8f96f80a00361d469d">jobrocket::make_job</a>([]() {</div><div class="line">        printf(<span class="stringliteral">&quot;Hello from job 1\n&quot;</span>);</div><div class="line">    });</div><div class="line"></div><div class="line">    <span class="keyword">auto</span>* job2 = <a class="code" href="namespacejobrocket.html#a71288fffce964c8f96f80a00361d469d">jobrocket::make_job</a>([]() {</div><div class="line">        printf(<span class="stringliteral">&quot;Hello from job 2\n&quot;</span>);</div><div class="line">    });</div><div class="line"></div><div class="line">    <span class="comment">// Allocate a job, run it, and then wait for the result</span></div><div class="line">    <a class="code" href="namespacejobrocket.html#ac84cc19209bbdbe84449c989bccd3315">jobrocket::make_job_and_wait</a>([]() {</div><div class="line">        printf(<span class="stringliteral">&quot;Hello from job 3\n&quot;</span>);</div><div class="line">    });</div><div class="line"></div><div class="line">    <span class="comment">// Run the earlier-allocated jobs</span></div><div class="line">    <a class="code" href="namespacejobrocket.html#a7417dcf61a49fc1c55dd589982e6b637">jobrocket::run</a>(job1);</div><div class="line">    <a class="code" href="namespacejobrocket.html#a7417dcf61a49fc1c55dd589982e6b637">jobrocket::run</a>(job2);</div><div class="line"></div><div class="line">    <span class="comment">// Wait for both to finish</span></div><div class="line">    <a class="code" href="namespacejobrocket.html#aa2281cc9388143f43823523671e77a5e">jobrocket::wait</a>(job2);</div><div class="line">    <a class="code" href="namespacejobrocket.html#aa2281cc9388143f43823523671e77a5e">jobrocket::wait</a>(job1);</div><div class="line"></div><div class="line">    <span class="comment">// JobRocket provides the `JobGroup` class to run many related jobs in parallel and wait on</span></div><div class="line">    <span class="comment">// all of them to finish</span></div><div class="line">    <a class="code" href="classjobrocket_1_1_job_group.html">jobrocket::JobGroup</a> group;</div><div class="line"></div><div class="line">    constexpr <span class="keywordtype">int</span> num_jobs = 200;</div><div class="line">    constexpr <span class="keywordtype">int</span> expected_result = (num_jobs * (num_jobs + 1)) / 2;</div><div class="line">    <span class="keywordtype">int</span> value = 0;</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;\nJobGroup: Sum of 1..%d:\n&quot;</span>, num_jobs);</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 1; i &lt;= num_jobs; ++i ) {</div><div class="line">        group.<a class="code" href="classjobrocket_1_1_job_group.html#ae430bec77f2ef9fefb2af91319f4995a">run</a>([&amp;, i]() {</div><div class="line">            value += i;</div><div class="line">        });</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Wait for all jobs to finish</span></div><div class="line">    group.<a class="code" href="classjobrocket_1_1_job_group.html#a7078d18c30fce2808f6520698fa706bb">wait_for_all</a>();</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;Expected value: %d | Final value: %d\n&quot;</span>, expected_result, value);</div><div class="line"></div><div class="line">    <a class="code" href="namespacejobrocket.html#a947e4220eaffb0cb18b53e612015ee69">jobrocket::shutdown</a>();</div><div class="line">}</div></div><!-- fragment --><p>This should output something along the lines of:</p>
<div class="fragment"><div class="line">Hello from job 3</div><div class="line">Hello from job 1</div><div class="line">Hello from job 2</div><div class="line"></div><div class="line">JobGroup: Sum of 1..200:</div><div class="line">Expected value: 20100 | Final value: 20100</div></div><!-- fragment --><h2>Getting Started</h2>
<h3>Dependencies:</h3>
<ul>
<li>CMake</li>
<li>A compiler with minimum C++14 support</li>
<li>OpenGL 4.0+ (for examples)</li>
</ul>
<h3>Building:</h3>
<p><code>cd</code> into the Jobrocket root directory and run the following commands:</p>
<div class="fragment"><div class="line"># setup directories</div><div class="line">mkdir Build</div><div class="line"></div><div class="line"># fetch and download dependencies with git submodule</div><div class="line">cd Build</div><div class="line"></div><div class="line"># make a directory for whatever configuration is going to be built (Debug/Release/RelWithDebInfo)</div><div class="line">mkdir &lt;build type&gt;</div><div class="line">cd &lt;build type&gt;</div><div class="line"></div><div class="line"># configure CMake files.</div><div class="line"># If running for the first time, all dependencies (git submodule) will be initialized and downloaded</div><div class="line">cmake ../.. -DCMAKE_BUILD_TYPE=&lt;build type&gt;</div><div class="line"></div><div class="line"># Build the project</div><div class="line">cmake --build .</div></div><!-- fragment --><p>The following options are available with the CMake build by adding <code>-D&lt;option&gt;=on</code> after <code>cmake ..</code></p>
<table class="doxtable">
<tr>
<th>Option</th><th>Description  </th></tr>
<tr>
<td><code>BUILD_EXAMPLES</code></td><td>Builds all example programs along with the library into <code>Build/&lt;BUILD_TYPE&gt;/Examples</code> </td></tr>
<tr>
<td><code>BUILD_TESTS</code></td><td>Builds all unit tests along with the library </td></tr>
<tr>
<td><code>CMAKE_BUILD_TYPE</code></td><td>Specifies the build type for the project with the following available: <code>Debug</code>, <code>Release</code>, <code>RelWithDebInfo</code> </td></tr>
</table>
<h2>Usage</h2>
<p>To use Jobrocket in your project first link the static library built in <code>/Build/</code> then add <code>Jobrocket_Root/Source</code> to your projects include path.</p>
<p>To use the library and simple tasks, simply include <code>&lt;Jobrocket/Jobrocket.hpp&gt;</code>. To use <code>JobGroup</code> objects, include <code>&lt;Jobrocket/JobGroup&gt;</code>.</p>
<h2>License</h2>
<p>Jobrocket is available under the <a href="https://github.com/jacobmilligan/Jobrocket/blob/master/LICENSE">MIT License</a>. </p>
</div></div><!-- contents -->
</div>
</body>
</html>
